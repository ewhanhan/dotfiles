# Set default terminal to screen-256color for 256 color support
set-option -g default-terminal "screen-256color"
set -ga terminal-overrides ",screen-256color*:Tc"

# Set prefix key to Ctrl-a instead of the default Ctrl-b
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Reduce escape key delay to improve responsiveness
set -sg escape-time 10

# Start window numbering at 1 instead of 0
set -g base-index 1
set -g pane-base-index 1

# Enable dynamic window titles
set -g set-titles on
set -g set-titles-string "#W #{command} #T #{session_path}"

# Enable focus events
set -g focus-events on

# Synchronize system clipboard with tmux
set -g set-clipboard on

# Increase history limit to 10000 entries
set -g history-limit 10000

# Enable mouse support for pane and window selection
set -g mouse on

# Configure status bar at the bottom
set-option -g status-position bottom
set-option -g status on
set-option -g status-interval 1

# Enable automatic renaming of windows
set-option -g automatic-rename on
set-option -g automatic-rename-format '#{b:pane_current_path}'

# Move status bar to top
set-option -g status-position top

# Pane management bindings
unbind %
bind | split-window -h -c "#{pane_current_path}"
unbind '"'
bind - split-window -v -c "#{pane_current_path}"

# Pane navigation bindings
bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R

# Toggle pane zoom (maximize/minimize)
bind -r m resize-pane -Z

# Change the keybinding to enter copy mode from 'prefix + [' to 'prefix + v'
unbind v
bind v copy-mode

# Turn vi binding copy mode
set-option -g status-keys vi
set-window-option -g mode-keys vi

# Copy in copy mode like vim
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

# Reload tmux configuration binding
unbind r
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# Install tpm automatically
if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"

# Tmux plugin configuration
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'jimeh/tmuxifier'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'jaclu/tmux-menus'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'egel/tmux-gruvbox'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'wfxr/tmux-fzf-url'

# tmux - url keybinding is u
set -g @fzf-url-bind 'u'

# Enable session restore on tmux start
set -g @continuum-restore 'on'
set -g @vim_navigator_mapping_left "C-Left C-h"  # use C-h and C-Left
set -g @vim_navigator_mapping_right "C-Right C-l"
set -g @vim_navigator_mapping_up "C-k"
set -g @vim_navigator_mapping_down "C-j"
set -g @vim_navigator_mapping_prev ""  # removes the C-\ binding 

set -g @tmux-gruvbox 'dark' 

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
